{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 900px; margin: 2rem auto;">
    <div class="card">
        <div class="card-header">
            <h2>Your Profile</h2>
        </div>
        <div class="card-body">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h4>Account Information</h4>
                    <div style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 4px;">
                        <p>
                            <strong>Email:</strong><br>
                            <code style="background: white; padding: 0.5rem; border-radius: 3px; display: block; margin-top: 0.3rem;">{{ user.email }}</code>
                        </p>
                        {% if user.phone %}
                            <p style="margin-top: 1rem;">
                                <strong>Phone:</strong><br>
                                <span style="font-family: monospace;">{{ user.phone }}</span>
                            </p>
                        {% endif %}
                        {% if user.first_name or user.last_name %}
                            <p style="margin-top: 1rem;">
                                <strong>Name:</strong><br>
                                {{ user.get_full_name }}
                            </p>
                        {% endif %}
                        <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                            <strong>Member since:</strong><br>
                            {{ user.date_joined|date:"F j, Y" }}
                        </p>
                    </div>
                </div>

                <div>
                    <h4>Account Stats</h4>
                    <div style="background-color: #f9f9f9; padding: 1.5rem; border-radius: 4px;">
                        <div style="margin-bottom: 1.5rem;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color);">{{ total_bookings }}</div>
                            <div style="font-size: 0.9rem; color: #666;">Total Bookings</div>
                        </div>
                        <div>
                            <div style="font-size: 2rem; font-weight: bold; color: var(--success-color);">{{ confirmed_bookings }}</div>
                            <div style="font-size: 0.9rem; color: #666;">Confirmed Bookings</div>
                        </div>
                    </div>
                </div>
            </div>

            <hr style="margin: 2rem 0;">

            <h3>Your Bookings</h3>
            {% if bookings %}
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background-color: var(--neutral-bg); border-bottom: 2px solid var(--neutral-border);">
                                <th style="padding: 1rem; text-align: left;">Court</th>
                                <th style="padding: 1rem; text-align: left;">Date</th>
                                <th style="padding: 1rem; text-align: left;">Time</th>
                                <th style="padding: 1rem; text-align: left;">Players</th>
                                <th style="padding: 1rem; text-align: left;">Status</th>
                                <th style="padding: 1rem; text-align: left;">Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for b in bookings %}
                                <tr style="border-bottom: 1px solid var(--neutral-border); hover: background-color: #f5f5f5;">
                                    <td style="padding: 1rem;"><a href="/booking/{{ b.pk }}/" style="color: var(--primary-color); text-decoration: none;">{{ b.court }}</a></td>
                                    <td style="padding: 1rem;">{{ b.date|date:"M d, Y" }}</td>
                                    <td style="padding: 1rem;">{{ b.start_time|time:"H:i" }} - {{ b.end_time|time:"H:i" }}</td>
                                    <td style="padding: 1rem;">{{ b.number_of_players }}</td>
                                    <td style="padding: 1rem;">
                                        <span style="display: inline-block; padding: 0.3rem 0.7rem; border-radius: 20px; font-size: 0.85rem; 
                                            {% if b.status == 'confirmed' %}background-color: #d4edda; color: #155724;
                                            {% elif b.status == 'cancelled' %}background-color: #f8d7da; color: #721c24;
                                            {% elif b.status == 'completed' %}background-color: #cfe2ff; color: #084298;
                                            {% else %}background-color: #fff3cd; color: #856404;{% endif %}">
                                            {{ b.get_status_display }}
                                        </span>
                                    </td>
                                    <td style="padding: 1rem; font-weight: 500;">â‚¹{{ b.total_price }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div style="background-color: #f0f0f0; padding: 2rem; border-radius: 4px; text-align: center;">
                    <p style="color: #666; margin-bottom: 1rem;">No bookings yet. Start by creating your first booking!</p>
                    <a href="/booking/create/" class="btn">Create Booking</a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
